package org.jhotdraw8.examples.mini;

import javafx.application.Application;
import javafx.scene.Parent;
import javafx.scene.Scene;
import javafx.scene.shape.Path;
import javafx.scene.shape.Rectangle;
import javafx.scene.text.Font;
import javafx.scene.text.Text;
import javafx.stage.Stage;
import org.jhotdraw8.geom.FXSvgPaths;

import java.util.Map;

public class MultipleMasterShapeMain extends Application {
    @Override
    public void start(Stage stage) throws Exception {
        Map.Entry<Parent, MultipleMasterShapeController> entry = MultipleMasterShapeController.newInstance();

        MultipleMasterShapeController ctrl = entry.getValue();

        // The following shapes are from
        // https://github.com/marella/material-symbols
        // Apache 2.0 License
        // MaterialSymbols/material-symbols/svg/100/sharp/key.svg
        ctrl.defaultSvgPathProperty().set("M280.212-444Q265-444 254.5-454.288q-10.5-10.287-10.5-25.5Q244-495 254.288-505.5q10.287-10.5 25.5-10.5Q295-516 305.5-505.712q10.5 10.287 10.5 25.5Q316-465 305.712-454.5q-10.287 10.5-25.5 10.5ZM280-292q-78 0-133-55T92-480q0-78 55-133t133-55q61 0 109.5 34t67.25 91H831l66 66-108 102-67-50-73 52-64-44H457q-18 54-66 89.5T280-292Zm0-22q60 0 103.5-37.5t55.306-87.5H593l56 39 74-52 66 50 77-76-43-43H439q-11-49-54.304-87-43.305-38-104.435-38Q211-646 162.5-597.659q-48.5 48.34-48.5 117.5Q114-411 162.387-362.5 210.775-314 280-314Z");
        // MaterialSymbols/material-symbols/svg/700/sharp/key.svg
        ctrl.dim1SvgPathProperty().set("M280.248-401Q248-401 224.5-424.252t-23.5-55.5Q201-512 224.252-535.5t55.5-23.5Q312-559 335.5-535.748t23.5 55.5Q359-448 335.748-424.5t-55.5 23.5ZM280-217q-108.667 0-185.833-77.235Q17-371.471 17-480.235 17-589 94.167-666 171.333-743 280-743q80 0 140 38t91.083 111H863l125 124-183 169-89-66-87 63-79-62h-39q-25 63-84.332 106Q367.335-217 280-217Zm0-83q61 0 110.5-41T452-448h127l50 42 88-63 82 60 73-60-42-43H452q-9-60-58.596-104Q343.809-660 280-660q-75 0-127.5 52.5T100-480q0 75 52.5 127.5T280-300Z");
        // MaterialSymbols/material-symbols/svg/100/sharp/key-fill.svg
        //ctrl.dim2SvgPathProperty().set("M280-417q26.5 0 44.75-18.25T343-480q0-26.5-18.25-44.75T280-543q-26.5 0-44.75 18.25T217-480q0 26.5 18.25 44.75T280-417Zm0 111q-74 0-124-50t-50-124q0-74 50-124t124-50q65 0 110.5 36t56.5 85h373l52 53-83 84-66-49-72 52-54-35H447q-9 49-55.5 85.5T280-306Z");


        // Helvetica Neue, small letter a
        ctrl.defaultSvgPathProperty().set("M57.599998474121094,-43.487998962402344 57.599998474121094,-29.808000564575195 Q57.599998474121094,-24.336000442504883,55.65599822998047,-19.152000427246094 53.71200180053711,-13.968000411987305,49.895999908447266,-10.008000373840332 46.08000183105469,-6.047999858856201,40.4640007019043,-3.5999999046325684 34.847999572753906,-1.1519999504089355,27.648000717163086,-1.1519999504089355 21.600000381469727,-1.1519999504089355,17.496000289916992,-2.6640000343322754 13.392000198364258,-4.176000118255615,10.800000190734863,-6.552000045776367 8.208000183105469,-8.928000450134277,7.127999782562256,-12.02400016784668 6.047999858856201,-15.119999885559082,6.047999858856201,-18.288000106811523 6.047999858856201,-24.191999435424805,7.920000076293945,-27.86400032043457 9.791999816894531,-31.535999298095703,12.960000038146973,-33.624000549316406 16.128000259399414,-35.71200180053711,20.23200035095215,-36.50400161743164 24.336000442504883,-37.29600143432617,28.6560001373291,-37.58399963378906 32.97600173950195,-37.87200164794922,37.512001037597656,-38.01599884033203 42.04800033569336,-38.15999984741211,45.93600082397461,-38.736000061035156 49.82400131225586,-39.3120002746582,52.847999572753906,-40.391998291015625 55.87200164794922,-41.47200012207031,57.3120002746582,-43.487998962402344 Z M36,-75.74400329589844 Q29.08799934387207,-75.74400329589844,23.97599983215332,-73.87200164794922 18.86400032043457,-72,15.336000442504883,-68.68800354003906 11.807999610900879,-65.3759994506836,9.935999870300293,-60.84000015258789 8.064000129699707,-56.30400085449219,7.776000022888184,-51.119998931884766 L10.656000137329102,-51.119998931884766 Q11.37600040435791,-61.487998962402344,17.856000900268555,-67.1760025024414 24.336000442504883,-72.86399841308594,36,-72.86399841308594 43.34400177001953,-72.86399841308594,47.66400146484375,-70.91999816894531 51.98400115966797,-68.97599792480469,54.215999603271484,-65.9520034790039 56.448001861572266,-62.928001403808594,57.02399826049805,-59.327999114990234 57.599998474121094,-55.72800064086914,57.599998474121094,-52.41600036621094 57.599998474121094,-48.2400016784668,55.944000244140625,-46.007999420166016 54.28799819946289,-43.7760009765625,50.7599983215332,-42.69599914550781 47.231998443603516,-41.61600112915039,41.7599983215332,-41.25600051879883 36.28799819946289,-40.895999908447266,28.6560001373291,-40.4640007019043 24.04800033569336,-40.17599868774414,19.440000534057617,-39.2400016784668 14.831999778747559,-38.30400085449219,11.232000350952148,-35.928001403808594 7.631999969482422,-33.551998138427734,5.400000095367432,-29.375999450683594 3.1679999828338623,-25.200000762939453,3.1679999828338623,-18.288000106811523 3.1679999828338623,-8.35200023651123,9.935999870300293,-3.384000062942505 16.70400047302246,1.5839999914169312,27.93600082397461,1.5839999914169312 33.69599914550781,1.5839999914169312,38.59199905395508,0.07199999690055847 43.487998962402344,-1.440000057220459,47.30400085449219,-4.0320000648498535 51.119998931884766,-6.624000072479248,53.63999938964844,-9.935999870300293 56.15999984741211,-13.248000144958496,57.3120002746582,-16.847999572753906 L57.599998474121094,-16.847999572753906 57.599998474121094,-7.199999809265137 Q57.599998474121094,-3.0239999294281006,59.97600173950195,-1.5119999647140503 62.35200119018555,0,65.5199966430664,0 L69.83999633789062,0 69.83999633789062,-2.880000114440918 Q68.4000015258789,-2.7360000610351562,66.74400329589844,-2.6640000343322754 66.46800231933594,-2.6519999504089355,66.197998046875,-2.6519999504089355 64.8479995727539,-2.6519999504089355,63.64799880981445,-2.9519999027252197 62.20800018310547,-3.312000036239624,61.34400177001953,-4.320000171661377 60.47999954223633,-5.328000068664551,60.47999954223633,-7.48799991607666 L60.47999954223633,-54.57600021362305 Q60.33599853515625,-60.624000549316406,58.31999969482422,-64.65599822998047 56.30400085449219,-68.68800354003906,52.992000579833984,-71.20800018310547 49.68000030517578,-73.72799682617188,45.28799819946289,-74.73600006103516 40.895999908447266,-75.74400329589844,36,-75.74400329589844 Z");
        ctrl.dim1SvgPathProperty().set("M52.453125,-33.73285675048828 52.453125,-27.7734375 Q52.453125,-22.5,49.74609375,-18.28125 47.0390625,-14.0625,42.43359375,-11.63671875 37.828125,-9.2109375,32.0625,-9.2109375 25.453125,-9.2109375,21.48046875,-12.3046875 17.5078125,-15.3984375,17.5078125,-20.671875 L17.5078125,-20.8125 Q17.5078125,-25.9453125,21.55078125,-29.0390625 25.59375,-32.1328125,32.90625,-32.5546875 L52.453125,-33.73285675048828 Z M36.5625,-74.53125 Q27.984375,-74.53125,21.7265625,-71.61328125 15.46875,-68.6953125,11.91796875,-63.7734375 8.3671875,-58.8515625,7.8046875,-52.8046875 L7.734375,-52.03125 19.546875,-52.03125 19.6875,-52.6640625 Q20.7421875,-57.5859375,25.06640625,-60.64453125 29.390625,-63.703125,36.421875,-63.703125 44.0859375,-63.703125,48.26953125,-59.87109375 52.453125,-56.0390625,52.453125,-49.359375 L52.453125,-43.244197845458984 52.453125,-43.244197845458984 31.5,-42.046875 Q23.1328125,-41.5546875,17.19140625,-38.8828125 11.25,-36.2109375,8.12109375,-31.640625 4.9921875,-27.0703125,4.9921875,-20.8125 L4.9921875,-20.671875 Q4.9921875,-14.0625,8.05078125,-9.0703125 11.109375,-4.078125,16.59375,-1.3359375 22.078125,1.40625,29.3203125,1.40625 34.2421875,1.40625,38.63671875,-0.24609375 43.03125,-1.8984375,46.546875,-4.88671875 50.0625,-7.875,52.171875,-11.8828125 L52.453125,-11.8828125 52.453125,0 64.6875,0 64.6875,-50.5546875 Q64.6875,-57.8671875,61.2421875,-63.24609375 57.796875,-68.625,51.50390625,-71.578125 45.2109375,-74.53125,36.5625,-74.53125 Z");
        ctrl.dim2SvgPathProperty().set("M52.453125,-33.73285675048828 52.453125,-27.7734375 Q52.453125,-22.5,49.74609375,-18.28125 47.0390625,-14.0625,42.43359375,-11.63671875 37.828125,-9.2109375,32.0625,-9.2109375 25.453125,-9.2109375,21.48046875,-12.3046875 17.5078125,-15.3984375,17.5078125,-20.671875 L17.5078125,-20.8125 Q17.5078125,-25.9453125,21.55078125,-29.0390625 25.59375,-32.1328125,32.90625,-32.5546875 L52.453125,-33.73285675048828 Z M36.5625,-74.53125 Q27.984375,-74.53125,21.7265625,-71.61328125 15.46875,-68.6953125,11.91796875,-63.7734375 8.3671875,-58.8515625,7.8046875,-52.8046875 L7.734375,-52.03125 19.546875,-52.03125 19.6875,-52.6640625 Q20.7421875,-57.5859375,25.06640625,-60.64453125 29.390625,-63.703125,36.421875,-63.703125 44.0859375,-63.703125,48.26953125,-59.87109375 52.453125,-56.0390625,52.453125,-49.359375 L52.453125,-43.244197845458984 52.453125,-43.244197845458984 31.5,-42.046875 Q23.1328125,-41.5546875,17.19140625,-38.8828125 11.25,-36.2109375,8.12109375,-31.640625 4.9921875,-27.0703125,4.9921875,-20.8125 L4.9921875,-20.671875 Q4.9921875,-14.0625,8.05078125,-9.0703125 11.109375,-4.078125,16.59375,-1.3359375 22.078125,1.40625,29.3203125,1.40625 34.2421875,1.40625,38.63671875,-0.24609375 43.03125,-1.8984375,46.546875,-4.88671875 50.0625,-7.875,52.171875,-11.8828125 L52.453125,-11.8828125 52.453125,0 64.6875,0 64.6875,-50.5546875 Q64.6875,-57.8671875,61.2421875,-63.24609375 57.796875,-68.625,51.50390625,-71.578125 45.2109375,-74.53125,36.5625,-74.53125 Z");

        ctrl.scaleFactorProperty().set(-2);

        stage.setScene(new Scene(entry.getKey()));
        stage.setTitle("MultipleMasterShape");
        stage.sizeToScene();
        stage.show();

        Text tx = new Text("a");
        tx.setFont(Font.font("Helvetica Neue Bold", 144f));
        Path path = (Path) javafx.scene.shape.Shape.subtract(tx, new Rectangle());
        System.out.println(FXSvgPaths.doubleSvgStringFromPathElements(path.getElements()));
    }
}
